<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queryable API Documentation - Microbot | OSRS Automation</title>
    <meta name="description"
        content="Microbot Queryable API documentation. A fluent, type-safe interface for querying NPCs, items, players, and game objects in Old School RuneScape automation scripts.">
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">

    <!-- Canonical URL -->
    <link rel="canonical" href="https://microbot.cloud/docs.html">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Microbot">
    <meta property="og:locale" content="en_US">
    <meta property="og:title" content="Queryable API Documentation - Microbot">
    <meta property="og:description"
        content="Microbot Queryable API documentation. A fluent, type-safe interface for querying NPCs, items, players, and game objects in Old School RuneScape automation scripts.">
    <meta property="og:image" content="https://microbot.cloud/images/general/logo.png">
    <meta property="og:url" content="https://microbot.cloud/docs.html">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Queryable API Documentation - Microbot">
    <meta name="twitter:description"
        content="Microbot Queryable API documentation. A fluent, type-safe interface for querying NPCs, items, players, and game objects in Old School RuneScape automation scripts.">
    <meta name="twitter:image" content="https://microbot.cloud/images/general/logo.png">

    <!-- Additional SEO -->
    <meta name="keywords"
        content="Microbot API, OSRS bot API, RuneLite plugin development, NPC query, game object query, automation scripting">
    <meta name="author" content="Microbot">
    <meta name="robots" content="index, follow">
    <meta name="theme-color" content="#111111">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400&display=swap');

        * {
            font-family: 'Inter', sans-serif;
        }

        code,
        pre {
            font-family: 'JetBrains Mono', monospace !important;
        }

        body {
            background: #111;
            color: #ccc;
        }

        .sidebar {
            background: #161616;
            border-right: 1px solid #222;
        }

        .nav-link {
            color: #888;
        }

        .nav-link:hover,
        .nav-link.active {
            color: #fff;
        }

        .content-section {
            scroll-margin-top: 2rem;
        }

        code:not([class*="language-"]) {
            background: #1a1a1a;
            color: #e5a06e;
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
            font-size: 0.85em;
        }

        pre[class*="language-"] {
            background: #0d0d0d !important;
            border-radius: 6px;
            margin: 1rem 0;
            font-size: 0.8rem;
            border: 1px solid #222;
        }

        h1,
        h2,
        h3 {
            color: #fff;
        }

        .card {
            background: #161616;
            border: 1px solid #222;
            border-radius: 6px;
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: -100%;
                transition: left 0.3s;
                z-index: 1000;
                width: 280px;
                height: 100vh;
            }

            .sidebar.show {
                left: 0;
            }
        }
    </style>
</head>

<body>
    <div class="md:hidden fixed top-4 left-4 z-50">
        <button id="mobile-menu-btn" class="bg-neutral-800 p-2 rounded text-white">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16">
                </path>
            </svg>
        </button>
    </div>

    <div class="flex min-h-screen">
        <aside id="sidebar" class="sidebar w-60 fixed md:sticky top-0 h-screen overflow-y-auto">
            <div class="p-6">
                <div class="mb-8">
                    <a href="index.html" class="text-white text-sm hover:text-neutral-400">‚Üê Back to Home</a>
                    <h1 class="text-xl font-semibold mt-4">Queryable API</h1>
                    <p class="text-neutral-500 text-xs mt-1">v2.2.0</p>
                </div>

                <nav class="space-y-1 text-sm">
                    <a href="#getting-started" class="nav-link block py-1.5">Getting Started</a>
                    <a href="#architecture" class="nav-link block py-1.5">Architecture</a>
                    <a href="#usage-rules" class="nav-link block py-1.5">Usage Rules</a>

                    <div class="pt-4 pb-2">
                        <p class="text-xs text-neutral-600 uppercase tracking-wide">Caches</p>
                    </div>
                    <a href="#npc" class="nav-link block py-1.5 pl-3">Rs2NpcCache</a>
                    <a href="#items" class="nav-link block py-1.5 pl-3">Rs2TileItemCache</a>
                    <a href="#players" class="nav-link block py-1.5 pl-3">Rs2PlayerCache</a>
                    <a href="#objects" class="nav-link block py-1.5 pl-3">Rs2TileObjectCache</a>
                    <a href="#boats" class="nav-link block py-1.5 pl-3">Rs2BoatCache</a>

                    <div class="pt-4 pb-2">
                        <p class="text-xs text-neutral-600 uppercase tracking-wide">Reference</p>
                    </div>
                    <a href="#api" class="nav-link block py-1.5">API Reference</a>
                    <a href="#threading" class="nav-link block py-1.5">Threading</a>
                    <a href="#worldview" class="nav-link block py-1.5">World View</a>
                    <a href="#patterns" class="nav-link block py-1.5">Common Patterns</a>
                    <a href="#migration" class="nav-link block py-1.5">Migration Guide</a>
                    <a href="#deprecated" class="nav-link block py-1.5">Deprecated APIs</a>
                </nav>

                <div class="mt-8 pt-6 border-t border-neutral-800 text-xs space-y-2">
                    <a href="https://discord.gg/zaGrfqFEWE" target="_blank"
                        class="block text-neutral-500 hover:text-white">Discord</a>
                    <a href="https://github.com/chsami/microbot" target="_blank"
                        class="block text-neutral-500 hover:text-white">GitHub</a>
                </div>
            </div>
        </aside>

        <main class="flex-1 p-8 md:p-16 max-w-4xl mx-auto">

            <!-- Getting Started -->
            <section id="getting-started" class="content-section mb-20">
                <h1 class="text-3xl font-semibold mb-3">Queryable API</h1>
                <p class="text-neutral-400 mb-8 text-lg">A fluent interface for querying game entities.</p>

                <div class="card p-5 mb-8">
                    <p class="text-neutral-300 text-sm leading-relaxed">
                        The Queryable API provides a type-safe, chainable way to find NPCs, players, ground items, and
                        tile objects. Access the cache via <code>Microbot.getRs2XxxCache()</code>, call <code>query()</code>, chain filters, and execute.
                    </p>
                    <p class="text-amber-400 text-sm mt-3">
                        üìö <strong>Complete Documentation:</strong> See <code>api/QUERYABLE_API.md</code> for comprehensive guide
                    </p>
                </div>

                <h3 class="text-lg font-medium mb-4">Quick Example</h3>
                <pre><code class="language-java">// Access cache via Microbot static getter
Rs2NpcModel banker = Microbot.getRs2NpcCache().query()
    .withName("Banker")
    .where(npc -> !npc.isInteracting())
    .nearestOnClientThread();</code></pre>
            </section>

            <!-- Architecture -->
            <section id="architecture" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">Singleton Architecture</h2>

                <div class="card p-5 mb-8">
                    <p class="text-neutral-300 text-sm leading-relaxed">
                        All caches are <code>@Singleton</code> classes injected via Guice and exposed through <code>Microbot</code> static getters.
                    </p>
                </div>

                <h3 class="text-lg font-medium mb-4">Cache Structure</h3>
                <pre><code class="language-java">@Singleton
public final class Rs2NpcCache {
    @Inject
    public Rs2NpcCache(Client client, ClientThread clientThread) { ... }

    public Stream&lt;Rs2NpcModel&gt; getStream() { ... }
    public Rs2NpcQueryable query() { return new Rs2NpcQueryable(); }
}</code></pre>

                <p class="text-neutral-400 text-sm mt-6 mb-4">Each cache provides:</p>
                <div class="space-y-2 text-sm">
                    <div class="card p-3">
                        <code class="text-white">getStream()</code>
                        <span class="text-neutral-500 ml-2">- Direct access to the underlying stream</span>
                    </div>
                    <div class="card p-3">
                        <code class="text-white">query()</code>
                        <span class="text-neutral-500 ml-2">- Returns a fluent queryable interface for filtering</span>
                    </div>
                </div>

                <h3 class="text-lg font-medium mt-10 mb-4">Available Caches</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="border-b border-neutral-800">
                                <th class="text-left py-3 px-4 text-neutral-400">Cache</th>
                                <th class="text-left py-3 px-4 text-neutral-400">Accessor</th>
                                <th class="text-left py-3 px-4 text-neutral-400">Methods</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b border-neutral-800/50">
                                <td class="py-3 px-4"><code>Rs2NpcCache</code></td>
                                <td class="py-3 px-4"><code>Microbot.getRs2NpcCache()</code></td>
                                <td class="py-3 px-4"><code>.query()</code>, <code>.getStream()</code></td>
                            </tr>
                            <tr class="border-b border-neutral-800/50">
                                <td class="py-3 px-4"><code>Rs2PlayerCache</code></td>
                                <td class="py-3 px-4"><code>Microbot.getRs2PlayerCache()</code></td>
                                <td class="py-3 px-4"><code>.query()</code>, <code>.getStream()</code></td>
                            </tr>
                            <tr class="border-b border-neutral-800/50">
                                <td class="py-3 px-4"><code>Rs2TileItemCache</code></td>
                                <td class="py-3 px-4"><code>Microbot.getRs2TileItemCache()</code></td>
                                <td class="py-3 px-4"><code>.query()</code>, <code>.getStream()</code></td>
                            </tr>
                            <tr class="border-b border-neutral-800/50">
                                <td class="py-3 px-4"><code>Rs2TileObjectCache</code></td>
                                <td class="py-3 px-4"><code>Microbot.getRs2TileObjectCache()</code></td>
                                <td class="py-3 px-4"><code>.query()</code>, <code>.getStream()</code></td>
                            </tr>
                            <tr class="border-b border-neutral-800/50">
                                <td class="py-3 px-4"><code>Rs2BoatCache</code></td>
                                <td class="py-3 px-4"><code>Microbot.getRs2BoatCache()</code></td>
                                <td class="py-3 px-4"><code>.getLocalBoat()</code>, <code>.getBoat(player)</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Usage Rules -->
            <section id="usage-rules" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">Usage Rules</h2>

                <div class="card p-5 mb-8 border-red-900/50 bg-red-950/20">
                    <p class="text-red-200 text-sm font-medium mb-2">‚ö†Ô∏è CRITICAL</p>
                    <p class="text-neutral-300 text-sm">Never instantiate caches or queryables directly. Always access via <code>Microbot.getRs2XxxCache()</code>.</p>
                </div>

                <h3 class="text-lg font-medium mb-4">‚úÖ Correct Usage Pattern</h3>
                <pre><code class="language-java">// ‚úÖ CORRECT - Use cache.query() method
Rs2NpcModel banker = Microbot.getRs2NpcCache().query()
    .withName("Banker")
    .where(npc -> !npc.isInteracting())
    .nearestOnClientThread();

// ‚úÖ CORRECT - Ground items via cache
Rs2TileItemModel loot = Microbot.getRs2TileItemCache().query()
    .withName("Dragon bones")
    .where(item -> item.getValue() > 1000)
    .nearestOnClientThread();

// ‚úÖ CORRECT - Tile objects via cache
Rs2TileObjectModel tree = Microbot.getRs2TileObjectCache().query()
    .withName("Oak tree")
    .nearestOnClientThread();
tree.click("Chop down");

// ‚úÖ CORRECT - Direct stream access when needed
Rs2NpcModel firstNpc = Microbot.getRs2NpcCache().getStream()
    .filter(npc -> npc.getName() != null)
    .findFirst()
    .orElse(null);

// ‚úÖ CORRECT - Boat cache (direct methods, no queryable)
Rs2BoatModel boat = Microbot.getRs2BoatCache().getLocalBoat();
if (boat != null) {
    boat.trimSails();
    boat.navigate();
}</code></pre>

                <h3 class="text-lg font-medium mt-10 mb-4">‚ùå Wrong Usage</h3>
                <pre><code class="language-java">// ‚ùå WRONG - Don't instantiate caches
Rs2NpcCache cache = new Rs2NpcCache();

// ‚ùå WRONG - Don't instantiate queryables directly
Rs2NpcModel npc = new Rs2NpcQueryable().withName("Banker").nearest();

// ‚ùå WRONG - Don't use deprecated static methods
Rs2NpcModel npc = Rs2NpcCache.getNpcsStream().findFirst().orElse(null);</code></pre>
            </section>

            <!-- NPC Cache -->
            <section id="npc" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-2">Rs2NpcCache</h2>
                <p class="text-neutral-500 text-sm mb-6">Query NPCs in the game world</p>

                <pre><code class="language-java">// Find nearest banker (uses client thread for name query)
Rs2NpcModel banker = Microbot.getRs2NpcCache().query()
    .withName("Banker")
    .nearestOnClientThread();

// Find all guards within 10 tiles
List&lt;Rs2NpcModel&gt; guards = Microbot.getRs2NpcCache().query()
    .withName("Guard")
    .within(10)
    .toList();

// Find attackable enemy
Rs2NpcModel enemy = Microbot.getRs2NpcCache().query()
    .withName("Goblin")
    .where(npc -> !npc.isInteracting())
    .where(npc -> npc.getHealthRatio() > 0)
    .nearestOnClientThread();</code></pre>

                <h4 class="font-medium mt-8 mb-3 text-sm">Rs2NpcModel Methods</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <code>npc.getName()</code>
                    <code>npc.getId()</code>
                    <code>npc.getWorldLocation()</code>
                    <code>npc.isInteracting()</code>
                    <code>npc.getHealthRatio()</code>
                    <code>npc.getAnimation()</code>
                    <code>npc.click("Action")</code>
                    <code>npc.interact("Action")</code>
                </div>
            </section>

            <!-- TileItem Cache -->
            <section id="items" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-2">Rs2TileItemCache</h2>
                <p class="text-neutral-500 text-sm mb-6">Query ground items</p>

                <pre><code class="language-java">// Find nearest coins (uses client thread for name query)
Rs2TileItemModel coins = Microbot.getRs2TileItemCache().query()
    .withName("Coins")
    .nearestOnClientThread();

// Find valuable loot (no name query, no client thread needed)
Rs2TileItemModel loot = Microbot.getRs2TileItemCache().query()
    .where(item -> item.getTotalGeValue() >= 5000)
    .where(Rs2TileItemModel::isLootAble)
    .nearest(10);

if (loot != null) {
    loot.pickup();
}</code></pre>

                <h4 class="font-medium mt-8 mb-3 text-sm">Rs2TileItemModel Methods</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <code>item.getName()</code>
                    <code>item.getId()</code>
                    <code>item.getQuantity()</code>
                    <code>item.getTotalValue()</code>
                    <code>item.getTotalGeValue()</code>
                    <code>item.isLootAble()</code>
                    <code>item.isStackable()</code>
                    <code>item.pickup()</code>
                </div>
            </section>

            <!-- Player Cache -->
            <section id="players" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-2">Rs2PlayerCache</h2>
                <p class="text-neutral-500 text-sm mb-6">Query other players</p>

                <pre><code class="language-java">// Find nearest player (no name query, no client thread needed)
Rs2PlayerModel player = Microbot.getRs2PlayerCache().query().nearest();

// Find player by name (uses client thread for name query)
Rs2PlayerModel target = Microbot.getRs2PlayerCache().query()
    .withName("PlayerName")
    .nearestOnClientThread();

// Find all friends nearby (no name query, no client thread needed)
List&lt;Rs2PlayerModel&gt; friends = Microbot.getRs2PlayerCache().query()
    .where(Rs2PlayerModel::isFriend)
    .within(20)
    .toList();</code></pre>

                <h4 class="font-medium mt-8 mb-3 text-sm">Rs2PlayerModel Methods</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <code>player.getName()</code>
                    <code>player.getCombatLevel()</code>
                    <code>player.getHealthRatio()</code>
                    <code>player.isFriend()</code>
                    <code>player.isClanMember()</code>
                    <code>player.isInteracting()</code>
                </div>
            </section>

            <!-- Object Cache -->
            <section id="objects" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-2">Rs2TileObjectCache</h2>
                <p class="text-neutral-500 text-sm mb-6">Query game objects (trees, rocks, banks, etc.)</p>

                <pre><code class="language-java">// Find nearest tree (uses client thread for name query)
Rs2TileObjectModel tree = Microbot.getRs2TileObjectCache().query()
    .withName("Tree")
    .nearestOnClientThread();

// Find nearest bank (uses client thread for name query)
Rs2TileObjectModel bank = Microbot.getRs2TileObjectCache().query()
    .withNames("Bank booth", "Bank chest", "Bank")
    .nearestOnClientThread();

if (bank != null && !Rs2Bank.isOpen()) {
    bank.click("Bank");
}</code></pre>

                <h4 class="font-medium mt-8 mb-3 text-sm">Rs2TileObjectModel Methods</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <code>obj.getName()</code>
                    <code>obj.getId()</code>
                    <code>obj.getWorldLocation()</code>
                    <code>obj.click("Action")</code>
                    <code>obj.interact("Action")</code>
                    <code>obj.isReachable()</code>
                </div>
            </section>

            <!-- Boat Cache -->
            <section id="boats" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-2">Rs2BoatCache</h2>
                <p class="text-neutral-500 text-sm mb-6">Access boat information (Sailing content)</p>

                <div class="card p-5 mb-6 border-blue-900/50 bg-blue-950/20">
                    <p class="text-blue-200 text-sm">
                        <strong>Note:</strong> Rs2BoatCache provides direct methods instead of a queryable interface.
                    </p>
                </div>

                <pre><code class="language-java">// Get the local player's boat
Rs2BoatModel boat = Microbot.getRs2BoatCache().getLocalBoat();

// Get another player's boat
Rs2BoatModel otherBoat = Microbot.getRs2BoatCache().getBoat(player);

if (boat != null) {
    boat.trimSails();
    boat.navigate();
    
    // Check boat state
    boolean isNavigating = boat.isNavigating();
}</code></pre>

                <h4 class="font-medium mt-8 mb-3 text-sm">Rs2BoatCache Methods</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <code>getLocalBoat()</code>
                    <code>getBoat(Player player)</code>
                </div>

                <h4 class="font-medium mt-6 mb-3 text-sm">Rs2BoatModel Methods</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <code>boat.trimSails()</code>
                    <code>boat.navigate()</code>
                    <code>boat.isNavigating()</code>
                </div>
            </section>

            <!-- API Reference -->
            <section id="api" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">API Reference</h2>

                <h3 class="font-medium mb-4">Terminal Operations</h3>
                <p class="text-neutral-400 text-sm mb-4">Execute the query and return results:</p>

                <div class="space-y-4 mb-10">
                    <div class="card p-4">
                        <code class="text-white">nearest()</code>
                        <p class="text-neutral-500 text-sm mt-1">Returns nearest entity to player</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">nearest(int maxDistance)</code>
                        <p class="text-neutral-500 text-sm mt-1">Returns nearest within max distance</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">first()</code>
                        <p class="text-neutral-500 text-sm mt-1">Returns first matching entity</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">firstOnClientThread()</code>
                        <p class="text-neutral-500 text-sm mt-1">Returns first entity (client thread safe). <span
                                class="text-amber-500">Required for name queries.</span></p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">nearestOnClientThread()</code>
                        <p class="text-neutral-500 text-sm mt-1">Returns nearest entity (client thread safe). <span
                                class="text-amber-500">Required for name queries.</span></p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">withName(String name)</code>
                        <p class="text-neutral-500 text-sm mt-1">Find nearest with exact name. <span
                                class="text-amber-500">‚ö†Ô∏è Use with <code>nearestOnClientThread()</code></span></p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">withNames(String... names)</code>
                        <p class="text-neutral-500 text-sm mt-1">Find nearest matching any name. <span
                                class="text-amber-500">‚ö†Ô∏è Use with <code>nearestOnClientThread()</code></span></p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">withId(int id)</code>
                        <p class="text-neutral-500 text-sm mt-1">Find nearest with specific ID</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">toList()</code>
                        <p class="text-neutral-500 text-sm mt-1">Returns all matching entities</p>
                    </div>
                </div>

                <h3 class="font-medium mb-4">Filter Operations</h3>
                <p class="text-neutral-400 text-sm mb-4">Filter entities and return queryable for chaining:</p>

                <div class="space-y-4">
                    <div class="card p-4">
                        <code class="text-white">where(Predicate&lt;E&gt; predicate)</code>
                        <p class="text-neutral-500 text-sm mt-1">Add custom filter with lambda</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">within(int distance)</code>
                        <p class="text-neutral-500 text-sm mt-1">Filter within distance from player</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">within(WorldPoint anchor, int distance)</code>
                        <p class="text-neutral-500 text-sm mt-1">Filter within distance from point</p>
                    </div>
                </div>
            </section>

            <!-- Threading -->
            <section id="threading" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">Threading</h2>
                <p class="text-neutral-400 text-sm mb-6">Scripts run on a scheduled executor thread, but certain
                    RuneLite API calls must run on the client thread.</p>

                <div class="card p-5 mb-8 border-amber-900/50 bg-amber-950/20">
                    <p class="text-amber-200 text-sm font-medium mb-2">‚ö†Ô∏è Client Thread Required</p>
                    <p class="text-neutral-300 text-sm">Queries using <code>withName()</code> or
                        <code>withNames()</code> access widget data. Use <code>nearestOnClientThread()</code> or
                        <code>firstOnClientThread()</code> instead of <code>nearest()</code> or <code>first()</code>.
                    </p>
                </div>

                <div class="space-y-8">
                    <div>
                        <h4 class="font-medium mb-3">Name Queries</h4>
                        <pre><code class="language-java">// ‚ùå WRONG - May throw "must be called on client thread" error
Rs2NpcModel banker = Microbot.getRs2NpcCache().query()
    .withName("Banker")
    .nearest();

// ‚úÖ CORRECT - Runs the query on the client thread
Rs2NpcModel banker = Microbot.getRs2NpcCache().query()
    .withName("Banker")
    .nearestOnClientThread();

// ‚úÖ CORRECT - Using first variant
Rs2NpcModel banker = Microbot.getRs2NpcCache().query()
    .withName("Banker")
    .firstOnClientThread();</code></pre>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Manual Client Thread Invocation</h4>
                        <p class="text-neutral-400 text-sm mb-3">For complex scenarios or multiple client-thread
                            operations:</p>
                        <pre><code class="language-java">// For operations that return a value
Rs2NpcModel banker = Microbot.getClientThread().invoke(() -> 
    Microbot.getRs2NpcCache().query()
        .withName("Banker")
        .nearest()
);

// For void operations
Microbot.getClientThread().invoke(() -> {
    Rs2NpcModel npc = Microbot.getRs2NpcCache().query().withName("Guard").nearest();
    if (npc != null) {
        npc.click("Attack");
    }
});</code></pre>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Other Client Thread Operations</h4>
                        <p class="text-neutral-400 text-sm mb-3">Always use
                            <code>Microbot.getClientThread().invoke()</code> when accessing:
                        </p>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-2 text-sm">
                            <code>client.getWidget()</code>
                            <code>widget.isHidden()</code>
                            <code>client.getVarbitValue()</code>
                            <code>client.getLocalPlayer().getWorldView()</code>
                            <code>BoatLocation.fromLocal()</code>
                            <code>TrialInfo.getCurrent()</code>
                            <code>Rs2BoatCache.getLocalBoat()</code>
                            <code>Rs2BoatModel.isNavigating()</code>
                        </div>
                    </div>
                </div>
            </section>

            <!-- World View -->
            <section id="worldview" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">Boat World View Support</h2>
                <p class="text-neutral-400 text-sm mb-6">When on a boat, objects exist in a different world view. Use <code>.fromWorldView()</code> to query the player's current world view.</p>

                <pre><code class="language-java">// Query objects in the boat's world view
var sails = Microbot.getRs2TileObjectCache().query()
    .fromWorldView()
    .withName("Sails")
    .nearestOnClientThread();

// Reachability is automatically handled for same world view
if (sails != null && sails.isReachable()) {
    sails.click("Trim");
}</code></pre>

                <div class="card p-5 mt-6 border-blue-900/50 bg-blue-950/20">
                    <p class="text-blue-200 text-sm">
                        <strong>Tip:</strong> The <code>.fromWorldView()</code> method automatically uses the local player's current world view, which is essential when on boats or in other instanced areas.
                    </p>
                </div>
            </section>

            <!-- Common Patterns -->
            <section id="patterns" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">Common Patterns</h2>

                <div class="space-y-8">
                    <div>
                        <h4 class="font-medium mb-3">Combat Script</h4>
                        <pre><code class="language-java">Rs2NpcModel enemy = Microbot.getRs2NpcCache().query()
    .withName("Goblin")
    .where(npc -> !npc.isInteracting())
    .where(npc -> npc.getHealthRatio() > 0)
    .nearestOnClientThread();

if (enemy != null && !Rs2Player.isInCombat()) {
    enemy.click("Attack");
}</code></pre>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Looting Script</h4>
                        <pre><code class="language-java">Rs2TileItemModel loot = Microbot.getRs2TileItemCache().query()
    .where(Rs2TileItemModel::isLootAble)
    .where(item -> item.getTotalGeValue() >= 5000)
    .nearest(15);  // No name query, no client thread needed

if (loot != null) {
    loot.pickup();
}</code></pre>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Null Safety</h4>
                        <pre><code class="language-java">Rs2NpcModel banker = Microbot.getRs2NpcCache().query()
    .withName("Banker")
    .nearestOnClientThread();

if (banker != null) {
    banker.click("Bank");
}</code></pre>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Reusable Predicates</h4>
                        <pre><code class="language-java">Predicate&lt;Rs2NpcModel&gt; isAlive = npc -> npc.getHealthRatio() > 0;
Predicate&lt;Rs2NpcModel&gt; notBusy = npc -> !npc.isInteracting();

Rs2NpcModel target = Microbot.getRs2NpcCache().query()
    .withName("Cow")
    .where(isAlive)
    .where(notBusy)
    .nearestOnClientThread();</code></pre>
                    </div>
                </div>
            </section>

            <!-- Migration Guide -->
            <section id="migration" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">Migration Guide</h2>
                <p class="text-neutral-400 text-sm mb-6">Migrating from the legacy API:</p>

                <div class="space-y-6">
                    <div>
                        <h4 class="font-medium mb-3">NPCs</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Legacy</p>
                                <pre><code class="language-java">NPC npc = Rs2Npc.getNpc("Banker");
NPC nearest = Rs2Npc.getNearestNpc("Guard");</code></pre>
                            </div>
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Queryable</p>
                                <pre><code class="language-java">Rs2NpcModel npc = Microbot.getRs2NpcCache().query()
    .withName("Banker")
    .nearestOnClientThread();
Rs2NpcModel nearest = Microbot.getRs2NpcCache().query()
    .withName("Guard")
    .nearestOnClientThread();</code></pre>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Ground Items</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Legacy</p>
                                <pre><code class="language-java">TileItem item = Rs2GroundItem.findItem("Coins");</code></pre>
                            </div>
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Queryable</p>
                                <pre><code class="language-java">Rs2TileItemModel item = Microbot.getRs2TileItemCache().query()
    .withName("Coins")
    .firstOnClientThread();</code></pre>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Interactions</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Legacy</p>
                                <pre><code class="language-java">Rs2Npc.interact(banker, "Bank");</code></pre>
                            </div>
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Queryable</p>
                                <pre><code class="language-java">banker.click("Bank");</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Deprecated APIs -->
            <section id="deprecated" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">Legacy Direct Cache Access (Deprecated)</h2>

                <div class="card p-5 mb-8 border-amber-900/50 bg-amber-950/20">
                    <p class="text-amber-200 text-sm font-medium mb-2">‚ö†Ô∏è Deprecated</p>
                    <p class="text-neutral-300 text-sm">Static methods are deprecated and will be removed in future versions. Use <code>Microbot.getRs2XxxCache().getStream()</code> instead.</p>
                </div>

                <pre><code class="language-java">// ‚ö†Ô∏è DEPRECATED - Static methods are deprecated and will be removed
// Use Microbot.getRs2XxxCache().getStream() instead

Rs2NpcCache.getNpcsStream()           // deprecated ‚Üí Microbot.getRs2NpcCache().getStream()
Rs2PlayerCache.getPlayersStream()     // deprecated ‚Üí Microbot.getRs2PlayerCache().getStream()
Rs2TileItemCache.getTileItemsStream() // deprecated ‚Üí Microbot.getRs2TileItemCache().getStream()
Rs2TileObjectCache.getObjectsStream() // deprecated ‚Üí Microbot.getRs2TileObjectCache().getStream()</code></pre>

                <h3 class="text-lg font-medium mt-10 mb-4">Migration from Deprecated APIs</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <p class="text-xs text-neutral-500 mb-2">Deprecated</p>
                        <pre><code class="language-java">Rs2NpcCache.getNpcsStream()
    .filter(npc -> npc.getName() != null)
    .findFirst()
    .orElse(null);</code></pre>
                    </div>
                    <div>
                        <p class="text-xs text-neutral-500 mb-2">New API</p>
                        <pre><code class="language-java">Microbot.getRs2NpcCache().getStream()
    .filter(npc -> npc.getName() != null)
    .findFirst()
    .orElse(null);</code></pre>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="border-t border-neutral-800 pt-8 text-sm text-neutral-600">
                <p>Microbot Queryable API v2.2.0 &middot; January 4, 2026</p>
            </footer>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    document.getElementById('sidebar').classList.remove('show');
                }
            });
        });

        const sections = document.querySelectorAll('.content-section');
        const navLinks = document.querySelectorAll('.nav-link');
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                if (scrollY >= section.offsetTop - 100) {
                    current = section.getAttribute('id');
                }
            });
            navLinks.forEach(link => {
                link.classList.toggle('active', link.getAttribute('href') === '#' + current);
            });
        });

        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            document.getElementById('sidebar').classList.toggle('show');
        });
    </script>
</body>

</html>