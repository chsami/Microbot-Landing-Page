<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queryable API - Microbot</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=JetBrains+Mono:wght@400&display=swap');
        * { font-family: 'Inter', sans-serif; }
        code, pre { font-family: 'JetBrains Mono', monospace !important; }
        body { background: #111; color: #ccc; }
        .sidebar { background: #161616; border-right: 1px solid #222; }
        .nav-link { color: #888; }
        .nav-link:hover, .nav-link.active { color: #fff; }
        .content-section { scroll-margin-top: 2rem; }
        code:not([class*="language-"]) { background: #1a1a1a; color: #e5a06e; padding: 0.15rem 0.4rem; border-radius: 4px; font-size: 0.85em; }
        pre[class*="language-"] { background: #0d0d0d !important; border-radius: 6px; margin: 1rem 0; font-size: 0.8rem; border: 1px solid #222; }
        h1, h2, h3 { color: #fff; }
        .card { background: #161616; border: 1px solid #222; border-radius: 6px; }
        @media (max-width: 768px) {
            .sidebar { position: fixed; left: -100%; transition: left 0.3s; z-index: 1000; width: 280px; height: 100vh; }
            .sidebar.show { left: 0; }
        }
    </style>
</head>
<body>
    <div class="md:hidden fixed top-4 left-4 z-50">
        <button id="mobile-menu-btn" class="bg-neutral-800 p-2 rounded text-white">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>
    </div>

    <div class="flex min-h-screen">
        <aside id="sidebar" class="sidebar w-60 fixed md:sticky top-0 h-screen overflow-y-auto">
            <div class="p-6">
                <div class="mb-8">
                    <a href="index.html" class="text-white text-sm hover:text-neutral-400">‚Üê Back to Home</a>
                    <h1 class="text-xl font-semibold mt-4">Queryable API</h1>
                    <p class="text-neutral-500 text-xs mt-1">v2.2.0</p>
                </div>

                <nav class="space-y-1 text-sm">
                    <a href="#getting-started" class="nav-link block py-1.5">Getting Started</a>
                    <a href="#core-concepts" class="nav-link block py-1.5">Core Concepts</a>

                    <div class="pt-4 pb-2">
                        <p class="text-xs text-neutral-600 uppercase tracking-wide">Caches</p>
                    </div>
                    <a href="#npc" class="nav-link block py-1.5 pl-3">Rs2NpcCache</a>
                    <a href="#items" class="nav-link block py-1.5 pl-3">Rs2TileItemCache</a>
                    <a href="#players" class="nav-link block py-1.5 pl-3">Rs2PlayerCache</a>
                    <a href="#objects" class="nav-link block py-1.5 pl-3">Rs2TileObjectCache</a>

                    <div class="pt-4 pb-2">
                        <p class="text-xs text-neutral-600 uppercase tracking-wide">Reference</p>
                    </div>
                    <a href="#api" class="nav-link block py-1.5">API Reference</a>
                    <a href="#patterns" class="nav-link block py-1.5">Common Patterns</a>
                    <a href="#migration" class="nav-link block py-1.5">Migration Guide</a>
                </nav>

                <div class="mt-8 pt-6 border-t border-neutral-800 text-xs space-y-2">
                    <a href="https://discord.gg/zaGrfqFEWE" target="_blank" class="block text-neutral-500 hover:text-white">Discord</a>
                    <a href="https://github.com/chsami/microbot" target="_blank" class="block text-neutral-500 hover:text-white">GitHub</a>
                </div>
            </div>
        </aside>

        <main class="flex-1 p-8 md:p-16 max-w-4xl mx-auto">

            <!-- Getting Started -->
            <section id="getting-started" class="content-section mb-20">
                <h1 class="text-3xl font-semibold mb-3">Queryable API</h1>
                <p class="text-neutral-400 mb-8 text-lg">A fluent interface for querying game entities.</p>

                <div class="card p-5 mb-8">
                    <p class="text-neutral-300 text-sm leading-relaxed">
                        The Queryable API provides a type-safe, chainable way to find NPCs, players, ground items, and tile objects. Inject the cache, call <code>query()</code>, chain filters, and execute.
                    </p>
                </div>

                <h3 class="text-lg font-medium mb-4">Quick Example</h3>
<pre><code class="language-java">@Inject
Rs2NpcCache rs2NpcCache;

Rs2NpcModel banker = rs2NpcCache.query()
    .withName("Banker")
    .where(npc -> !npc.isInteracting())
    .nearest();</code></pre>

                <h3 class="text-lg font-medium mt-10 mb-4">Setup</h3>
<pre><code class="language-java">// Imports
import net.runelite.client.plugins.microbot.api.npc.Rs2NpcCache;
import net.runelite.client.plugins.microbot.api.tileitem.Rs2TileItemCache;
import net.runelite.client.plugins.microbot.api.player.Rs2PlayerCache;
import net.runelite.client.plugins.microbot.api.tileobject.Rs2TileObjectCache;

// Inject in your class
@Inject Rs2NpcCache rs2NpcCache;
@Inject Rs2TileItemCache rs2TileItemCache;
@Inject Rs2PlayerCache rs2PlayerCache;
@Inject Rs2TileObjectCache rs2TileObjectCache;</code></pre>
            </section>

            <!-- Core Concepts -->
            <section id="core-concepts" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">Core Concepts</h2>

                <div class="space-y-8">
                    <div>
                        <h3 class="font-medium mb-3">Dependency Injection</h3>
                        <p class="text-neutral-400 text-sm mb-3">Always inject the cache first, then call <code>query()</code>:</p>
<pre><code class="language-java">@Inject
Rs2NpcCache rs2NpcCache;

Rs2NpcModel npc = rs2NpcCache.query().withName("Guard").nearest();</code></pre>
                    </div>

                    <div>
                        <h3 class="font-medium mb-3">Fluent Chaining</h3>
                        <p class="text-neutral-400 text-sm mb-3">Chain multiple filters together:</p>
<pre><code class="language-java">rs2NpcCache.query()
    .withName("Guard")
    .where(npc -> !npc.isInteracting())
    .within(15)
    .nearest();</code></pre>
                    </div>

                    <div>
                        <h3 class="font-medium mb-3">Lazy Evaluation</h3>
                        <p class="text-neutral-400 text-sm mb-3">Queries execute only when you call a terminal operation:</p>
<pre><code class="language-java">var query = rs2NpcCache.query().withName("Guard").within(10);
Rs2NpcModel guard = query.nearest();  // Executes here</code></pre>
                    </div>
                </div>
            </section>

            <!-- NPC Cache -->
            <section id="npc" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-2">Rs2NpcCache</h2>
                <p class="text-neutral-500 text-sm mb-6">Query NPCs in the game world</p>

<pre><code class="language-java">@Inject Rs2NpcCache rs2NpcCache;

// Find nearest banker
Rs2NpcModel banker = rs2NpcCache.query()
    .withName("Banker")
    .nearest();

// Find all guards within 10 tiles
List&lt;Rs2NpcModel&gt; guards = rs2NpcCache.query()
    .withName("Guard")
    .within(10)
    .toList();

// Find attackable enemy
Rs2NpcModel enemy = rs2NpcCache.query()
    .withName("Goblin")
    .where(npc -> !npc.isInteracting())
    .where(npc -> npc.getHealthRatio() > 0)
    .nearest(10);</code></pre>

                <h4 class="font-medium mt-8 mb-3 text-sm">Rs2NpcModel Methods</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <code>npc.getName()</code>
                    <code>npc.getId()</code>
                    <code>npc.getWorldLocation()</code>
                    <code>npc.isInteracting()</code>
                    <code>npc.getHealthRatio()</code>
                    <code>npc.getAnimation()</code>
                    <code>npc.click("Action")</code>
                    <code>npc.interact("Action")</code>
                </div>
            </section>

            <!-- TileItem Cache -->
            <section id="items" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-2">Rs2TileItemCache</h2>
                <p class="text-neutral-500 text-sm mb-6">Query ground items</p>

<pre><code class="language-java">@Inject Rs2TileItemCache rs2TileItemCache;

// Find nearest coins
Rs2TileItemModel coins = rs2TileItemCache.query()
    .withName("Coins")
    .nearest();

// Find valuable loot
Rs2TileItemModel loot = rs2TileItemCache.query()
    .where(item -> item.getTotalGeValue() >= 5000)
    .where(Rs2TileItemModel::isLootAble)
    .nearest(10);

if (loot != null) {
    loot.pickup();
}</code></pre>

                <h4 class="font-medium mt-8 mb-3 text-sm">Rs2TileItemModel Methods</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <code>item.getName()</code>
                    <code>item.getId()</code>
                    <code>item.getQuantity()</code>
                    <code>item.getTotalValue()</code>
                    <code>item.getTotalGeValue()</code>
                    <code>item.isLootAble()</code>
                    <code>item.isStackable()</code>
                    <code>item.pickup()</code>
                </div>
            </section>

            <!-- Player Cache -->
            <section id="players" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-2">Rs2PlayerCache</h2>
                <p class="text-neutral-500 text-sm mb-6">Query other players</p>

<pre><code class="language-java">@Inject Rs2PlayerCache rs2PlayerCache;

// Find nearest player
Rs2PlayerModel player = rs2PlayerCache.query().nearest();

// Find player by name
Rs2PlayerModel target = rs2PlayerCache.query()
    .withName("PlayerName")
    .nearest();

// Find all friends nearby
List&lt;Rs2PlayerModel&gt; friends = rs2PlayerCache.query()
    .where(Rs2PlayerModel::isFriend)
    .within(20)
    .toList();</code></pre>

                <h4 class="font-medium mt-8 mb-3 text-sm">Rs2PlayerModel Methods</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <code>player.getName()</code>
                    <code>player.getCombatLevel()</code>
                    <code>player.getHealthRatio()</code>
                    <code>player.isFriend()</code>
                    <code>player.isClanMember()</code>
                    <code>player.isInteracting()</code>
                </div>
            </section>

            <!-- Object Cache -->
            <section id="objects" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-2">Rs2TileObjectCache</h2>
                <p class="text-neutral-500 text-sm mb-6">Query game objects (trees, rocks, banks, etc.)</p>

<pre><code class="language-java">@Inject Rs2TileObjectCache rs2TileObjectCache;

// Find nearest tree
Rs2TileObjectModel tree = rs2TileObjectCache.query()
    .withName("Tree")
    .nearest();

// Find nearest bank
Rs2TileObjectModel bank = rs2TileObjectCache.query()
    .withNames("Bank booth", "Bank chest", "Bank")
    .nearest(20);

if (bank != null && !Rs2Bank.isOpen()) {
    bank.click("Bank");
}</code></pre>

                <h4 class="font-medium mt-8 mb-3 text-sm">Rs2TileObjectModel Methods</h4>
                <div class="grid grid-cols-2 gap-2 text-sm">
                    <code>obj.getName()</code>
                    <code>obj.getId()</code>
                    <code>obj.getWorldLocation()</code>
                    <code>obj.click("Action")</code>
                    <code>obj.interact("Action")</code>
                </div>
            </section>

            <!-- API Reference -->
            <section id="api" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">API Reference</h2>

                <h3 class="font-medium mb-4">Terminal Operations</h3>
                <p class="text-neutral-400 text-sm mb-4">Execute the query and return results:</p>

                <div class="space-y-4 mb-10">
                    <div class="card p-4">
                        <code class="text-white">nearest()</code>
                        <p class="text-neutral-500 text-sm mt-1">Returns nearest entity to player</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">nearest(int maxDistance)</code>
                        <p class="text-neutral-500 text-sm mt-1">Returns nearest within max distance</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">first()</code>
                        <p class="text-neutral-500 text-sm mt-1">Returns first matching entity</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">withName(String name)</code>
                        <p class="text-neutral-500 text-sm mt-1">Find nearest with exact name</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">withNames(String... names)</code>
                        <p class="text-neutral-500 text-sm mt-1">Find nearest matching any name</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">withId(int id)</code>
                        <p class="text-neutral-500 text-sm mt-1">Find nearest with specific ID</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">toList()</code>
                        <p class="text-neutral-500 text-sm mt-1">Returns all matching entities</p>
                    </div>
                </div>

                <h3 class="font-medium mb-4">Filter Operations</h3>
                <p class="text-neutral-400 text-sm mb-4">Filter entities and return queryable for chaining:</p>

                <div class="space-y-4">
                    <div class="card p-4">
                        <code class="text-white">where(Predicate&lt;E&gt; predicate)</code>
                        <p class="text-neutral-500 text-sm mt-1">Add custom filter with lambda</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">within(int distance)</code>
                        <p class="text-neutral-500 text-sm mt-1">Filter within distance from player</p>
                    </div>
                    <div class="card p-4">
                        <code class="text-white">within(WorldPoint anchor, int distance)</code>
                        <p class="text-neutral-500 text-sm mt-1">Filter within distance from point</p>
                    </div>
                </div>
            </section>

            <!-- Common Patterns -->
            <section id="patterns" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">Common Patterns</h2>

                <div class="space-y-8">
                    <div>
                        <h4 class="font-medium mb-3">Combat Script</h4>
<pre><code class="language-java">Rs2NpcModel enemy = rs2NpcCache.query()
    .withName("Goblin")
    .where(npc -> !npc.isInteracting())
    .where(npc -> npc.getHealthRatio() > 0)
    .nearest(10);

if (enemy != null && !Rs2Player.isInCombat()) {
    enemy.click("Attack");
}</code></pre>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Looting Script</h4>
<pre><code class="language-java">Rs2TileItemModel loot = rs2TileItemCache.query()
    .where(Rs2TileItemModel::isLootAble)
    .where(item -> item.getTotalGeValue() >= 5000)
    .nearest(15);

if (loot != null) {
    loot.pickup();
}</code></pre>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Null Safety</h4>
<pre><code class="language-java">Rs2NpcModel banker = rs2NpcCache.query()
    .withName("Banker")
    .nearest();

if (banker != null) {
    banker.click("Bank");
}</code></pre>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Reusable Predicates</h4>
<pre><code class="language-java">Predicate&lt;Rs2NpcModel&gt; isAlive = npc -> npc.getHealthRatio() > 0;
Predicate&lt;Rs2NpcModel&gt; notBusy = npc -> !npc.isInteracting();

Rs2NpcModel target = rs2NpcCache.query()
    .withName("Cow")
    .where(isAlive)
    .where(notBusy)
    .nearest();</code></pre>
                    </div>
                </div>
            </section>

            <!-- Migration Guide -->
            <section id="migration" class="content-section mb-20">
                <h2 class="text-2xl font-semibold mb-6">Migration Guide</h2>
                <p class="text-neutral-400 text-sm mb-6">Migrating from the legacy API:</p>

                <div class="space-y-6">
                    <div>
                        <h4 class="font-medium mb-3">NPCs</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Legacy</p>
<pre><code class="language-java">NPC npc = Rs2Npc.getNpc("Banker");
NPC nearest = Rs2Npc.getNearestNpc("Guard");</code></pre>
                            </div>
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Queryable</p>
<pre><code class="language-java">Rs2NpcModel npc = rs2NpcCache.query()
    .withName("Banker");
Rs2NpcModel nearest = rs2NpcCache.query()
    .withName("Guard").nearest();</code></pre>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Ground Items</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Legacy</p>
<pre><code class="language-java">TileItem item = Rs2GroundItem.findItem("Coins");</code></pre>
                            </div>
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Queryable</p>
<pre><code class="language-java">Rs2TileItemModel item = rs2TileItemCache.query()
    .withName("Coins").first();</code></pre>
                            </div>
                        </div>
                    </div>

                    <div>
                        <h4 class="font-medium mb-3">Interactions</h4>
                        <div class="grid md:grid-cols-2 gap-4">
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Legacy</p>
<pre><code class="language-java">Rs2Npc.interact(banker, "Bank");</code></pre>
                            </div>
                            <div>
                                <p class="text-xs text-neutral-500 mb-2">Queryable</p>
<pre><code class="language-java">banker.click("Bank");</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="border-t border-neutral-800 pt-8 text-sm text-neutral-600">
                <p>Microbot Queryable API v2.2.0 &middot; December 30, 2025</p>
            </footer>
        </main>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    document.getElementById('sidebar').classList.remove('show');
                }
            });
        });

        const sections = document.querySelectorAll('.content-section');
        const navLinks = document.querySelectorAll('.nav-link');
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                if (scrollY >= section.offsetTop - 100) {
                    current = section.getAttribute('id');
                }
            });
            navLinks.forEach(link => {
                link.classList.toggle('active', link.getAttribute('href') === '#' + current);
            });
        });

        document.getElementById('mobile-menu-btn').addEventListener('click', () => {
            document.getElementById('sidebar').classList.toggle('show');
        });
    </script>
</body>
</html>
